<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drag-and-Drop Kochspiel</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .items-container {
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .item {
      width: 100px;
      height: 50px;
      margin: 10px;
      background-color: lightblue;
      text-align: center;
      line-height: 50px;
      cursor: pointer;
      border-radius: 5px;
    }

    .drop-area {
      width: 300px;
      height: 200px;
      margin-top: 20px;
      background-color: lightgray;
      position: relative;
      border: 2px dashed #888;
      border-radius: 10px;
    }

  </style>
</head>
<body>

  <h1>Drag-and-Drop Kochspiel</h1>

  <div class="items-container">
    <!-- Beispiel-Zutaten -->
    <div id="burger_broetchen" class="item" draggable="true" ondragstart="drag(event)">Burger Brötchen</div>
    <div id="rindfleisch_patty" class="item" draggable="true" ondragstart="drag(event)">Rindfleisch Patty</div>
    <div id="salat" class="item" draggable="true" ondragstart="drag(event)">Salat</div>
    <div id="tomate" class="item" draggable="true" ondragstart="drag(event)">Tomate</div>
    <div id="zwiebeln" class="item" draggable="true" ondragstart="drag(event)">Zwiebeln</div>
    <div id="ketchup" class="item" draggable="true" ondragstart="drag(event)">Ketchup</div>
    <!-- Weitere Zutaten hier -->
  </div>

  <div id="tray" class="drop-area" ondrop="dropOnTray(event)" ondragover="allowDrop(event)">
    <!-- Das Tablett -->
    <p>Ziehe Zutaten hierher!</p>
  </div>

  <script>
    let draggedItem = null;  // Das aktuell gezogene Item
    let originalParent = null;  // Ursprünglicher Elternteil des gezogenen Items
    let originalPosition = { x: 0, y: 0 };  // Ursprüngliche Position des Items

    // Funktion zum Starten des Dragvorgangs
    function drag(event) {
      draggedItem = event.target;  // Das gezogene Element
      originalParent = draggedItem.parentElement;  // Der ursprüngliche Elternteil
      originalPosition = {
        x: event.clientX,
        y: event.clientY
      };

      // Beginne mit dem Ziehen des Items
      draggedItem.style.position = "absolute";  // Positioniere das Item absolut
      draggedItem.style.zIndex = 1000;  // Mache das Item sichtbar über anderen Elementen
      document.body.appendChild(draggedItem);  // Hänge das Item direkt an den Body

      // Initiale Position des Items
      updatePosition(event);
    }

    // Funktion zum Aktualisieren der Position des gezogenen Items
    function updatePosition(event) {
      if (!draggedItem) return;

      const deltaX = event.clientX - originalPosition.x;
      const deltaY = event.clientY - originalPosition.y;

      draggedItem.style.left = `${originalPosition.x + deltaX}px`;
      draggedItem.style.top = `${originalPosition.y + deltaY}px`;
    }

    // Während des Ziehens die Position aktualisieren
    document.addEventListener("mousemove", (event) => {
      if (draggedItem) {
        updatePosition(event);
      }
    });

    // Wenn das Element fallen gelassen wird
    function drop(event) {
      event.preventDefault();

      // Prüfen, ob es eine gültige Drop-Zone ist
      if (event.target.classList.contains("drop-area")) {
        event.target.appendChild(draggedItem);  // Element auf die Drop-Zone setzen
      } else {
        // Zurück zum ursprünglichen Platz, wenn nicht gültig
        originalParent.appendChild(draggedItem);
      }

      // Zurücksetzen der Dragging-Variable
      draggedItem.style.position = "";  // Entferne die absolute Position
      draggedItem.style.zIndex = "";  // Entferne die Z-Index-Eigenschaft
      draggedItem = null;
    }

    // Verhindern, dass das Element standardmäßig abgelegt wird
    function allowDrop(event) {
      event.preventDefault();
    }

    // Eventlistener für das Fallenlassen auf dem Tablett
    document.querySelector(".drop-area").addEventListener("drop", drop);

    // Füge auch das Dragend-Event hinzu, um das Element zurückzusetzen, falls es nicht fallen gelassen wird
    document.querySelectorAll(".item").forEach(item => {
      item.addEventListener("dragend", (event) => {
        // Wenn das Element nach dem Ziehen nicht abgelegt wird, zurücksetzen
        if (!draggedItem) {
          originalParent.appendChild(event.target);
        }
        draggedItem = null;
      });
    });
  </script>
</body>
</html>
