<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Let Me Cook</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            margin: 0;
            padding: 0;
        }
        .container {
            width: 500px;
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #ccc;
        }
        h1 { text-align: center; }

        .customers {
            display: flex;
            justify-content: center;
            margin: 10px 0;
        }
        .customer {
            width: 100px;
            height: 100px;
            margin: 25px;
            border: 1px solid #ccc;
            text-align: center;
            line-height: 50px;
            user-select: none;
            background: url('customer.png') center/cover;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            color: white;
            font-weight: bold;
        }
        
        .tray-container {
            flex-direction: row;
            align-items: flex-start;
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        .tray {
            flex: 0 0 80%;
            height: 100px;
            background-color: lightgray;
            border: 2px solid darkgray;
            align-content: flex-start;
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-start;
        }
        .btn {
            flex: 0 0 10%;
            margin: 5px;
            padding: 10px 0;
            cursor: pointer;
            box-sizing: border-box;
            text-align: center;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
        }

        .workstations {
            display: flex;
            justify-content: center;
            margin: 15px 0;
        }
        .station {
            width: 50px;
            height: 50px;
            border-radius: 15px;
            margin: 5px;
            background-color: #ccc;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #999;
        }
        .warmer { background-color: #f7c6c7; }
        .stove { background-color: #ffd700; }
        .fryer { background-color: #d2b48c; }

        .items-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 10px 0;
        }
        .item {
            width: 40px;
            height: 40px;
            margin: 5px;
            border: 1px solid #ccc;
            user-select: none;
            border-radius: 5px;
            background-color: #eaeaea;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: grab;
            background-size: cover;
        }

        /* Hintergrundbilder für Zutaten */
        #rindfleisch_patty { background-image: url('rindfleisch_patty.png'); }
        #gemuese_patty { background-image: url('gemuese_patty.png'); }
        #pommes { background-image: url('pommes.png'); }
        #brötchen { background-image: url('burger_broetchen.png'); }
        #salat { background-image: url('salat.png'); }
        #tomate { background-image: url('tomate.png'); }
        #schinken { background-image: url('schinken.png'); }
        #kaese { background-image: url('kaese.png'); }
        #gurke { background-image: url('gurke.png'); }
        #mais { background-image: url('mais.png'); }
    </style>
</head>
<body>
    <div class="container">
        <h1>Let Me Cook</h1>

        <!-- Kundenanzeige -->
        <div class="customers">
            <div class="customer" id="customer1" data-order="Pommes Spezial">Kunde 1</div>
            <div class="customer" id="customer2" data-order="Hamburger">Kunde 2</div>
            <div class="customer" id="customer3" data-order="Hotdog">Kunde 3</div>
        </div>

        <!-- Speisewärmer und Geräte in einer Zeile -->
        <div class="workstations">
            <div class="station warmer" id="warmer1" ondrop="dropDish(event)" ondragover="allowDrop(event)">Wärmer 1</div>
            <div class="station warmer" id="warmer2" ondrop="dropDish(event)" ondragover="allowDrop(event)">Wärmer 2</div>
            <div class="station warmer" id="warmer3" ondrop="dropDish(event)" ondragover="allowDrop(event)">Wärmer 3</div>
            <div class="station stove" id="stove1" ondrop="dropStove(event)" ondragover="allowDrop(event)">Herdplatte</div>
            <div class="station stove" id="stove2" ondrop="dropStove(event)" ondragover="allowDrop(event)">Herdplatte</div>
            <div class="station fryer" id="fryer" ondrop="dropFryer(event)" ondragover="allowDrop(event)">Friteuse</div>
        </div>

        <!-- Tablett für Zubereitung -->
        <div class="tray-container">
            <div class="tray" id="tray" ondrop="drop(event)" ondragover="allowDrop(event)">
                <p>Tablett</p>
            </div>
            <button class="btn" onclick="prepareDish()">Zubereiten</button>
        </div>

        <!-- Zutaten -->
        <div class="items-container">
            <div id="rindfleisch_patty" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="gemuese_patty" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="pommes" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="brötchen" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="salat" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="tomate" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="schinken" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="kaese" class="item" draggable="true" ondragstart="drag(event)"></div>
            <div id="gurke" class="item" draggable="true" ondragstart="drag(event)"></div>
        </div>
    </div>

    <script>
        const recipes = {
            "Pommes Spezial": ["pommes", "mayonnaise", "ketchup", "zwiebeln"],
            "Hamburger": ["brötchen", "rindfleisch_patty", "salat", "tomate", "zwiebeln", "ketchup"],
            "Hotdog": ["hotdog_broetchen", "wurst", "currysauce"],
        };

        let preparationTimers = {};

        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const item = document.getElementById(data);
            ev.target.appendChild(item);
        }

        function dropStove(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const item = document.getElementById(data);
            if (item.id === "rindfleisch_patty" || item.id === "gemuese_patty") {
                ev.target.appendChild(item);
                startPreparation(ev.target, item);
            }
        }

        function dropFryer(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const item = document.getElementById(data);
            if (item.id === "pommes") {
                ev.target.appendChild(item);
                startPreparation(ev.target, item);
            }
        }

        function startPreparation(station, item) {
            const timerId = setTimeout(() => {
                const finishedItemId = item.id + "_fertig";
                const finishedItem = document.createElement("div");
                finishedItem.id = finishedItemId;
                finishedItem.className = "item";
                finishedItem.style.backgroundImage = "url('" + finishedItemId + ".png')";
                station.parentNode.insertBefore(finishedItem, station);
                station.removeChild(item);
            }, 5000);
            preparationTimers[station.id] = timerId;
        }

        function prepareDish() {
            const tray = document.getElementById("tray");
            const items = [...tray.children].map(item => item.id);
            const order = [...document.querySelectorAll('.customer')].map(customer => ({
                id: customer.id,
                order: customer.dataset.order
            }));
            
            for (let o of order) {
                if (recipes[o.order].sort().toString() === items.sort().toString()) {
                    alert(o.order + " serviert!");
                    const customer = document.getElementById(o.id);
                    customer.style.display = "none"; // Kunde verlässt
                    tray.innerHTML = ''; // Tablett leeren
                    return;
                }
            }
            alert("Falsches Gericht!");
        }
    </script>
</body>
</html>
